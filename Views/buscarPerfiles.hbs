import React, { useState, useEffect } from 'react';

const SearchBar = () => {
  const [query, setQuery] = useState('');
  const [suggestions, setSuggestions] = useState([]);

  useEffect(() => {
    const fetchSuggestions = async () => {
      if (query.length >= 2) {
        try {
          const response = await fetch(`/sugerencias?q=${query}`);
          const data = await response.json();

          setSuggestions(data);
        } catch (error) {
          console.error('Error fetching suggestions:', error);
        }
      }
    };

    fetchSuggestions();
  }, [query]);

  return (
    <form className="d-flex" style={{ margin: '70px 0' }} action="/sugerencias" method="GET">
      <input
        className="form-control me-2"
        type="search"
        name="q"
        placeholder="Search"
        aria-label="Search"
        value={query}
        onChange={(e) => setQuery(e.target.value)}
        list="suggestionsList"
        autoComplete="off"
      />
      <datalist id="suggestionsList">
        {suggestions.map((suggestion) => (
          <option key={suggestion} value={suggestion}>{suggestion}</option>
        ))}
      </datalist>
      <button className="btn btn-outline-success" type="submit">Search</button>
    </form>
  );
};

const UserCards = ({ usuarios }) => {
  // Assuming 'usersCards' is a React component
  return (
    <div className="user-cards">
      {usuarios.map((usuario) => (
        <usersCards key={usuario.id} usuario={usuario} />
      ))}
    </div>
  );
};

const App = () => {
  const [usuarios, setUsuarios] = useState([]); // Assuming 'usuarios' is fetched from somewhere

  // ... logic to fetch usuarios and update the state

  return (
    <div>
      <SearchBar />
      <UserCards usuarios={usuarios} />
    </div>
  );
};

export default App;